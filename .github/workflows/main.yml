name: 洛谷自动签到

on:
  schedule:
    - cron: '1 16 * * *'  # 每天 UTC 16:01 (UTC+8 00:01)
  workflow_dispatch:

jobs:
  signin:
    runs-on: ubuntu-latest
    
    steps:
    - name: 检出代码
      uses: actions/checkout@v4
      
    - name: 设置 Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        
    - name: 创建必要目录
      run: |
        mkdir -p .data
        mkdir -p scripts
        
    - name: 执行洛谷签到
      env:
        LUOGU_COOKIE: ${{ secrets.LUOGU_COOKIE }}
      run: node scripts/luogu-signin.js
